<!DOCTYPE html>
<html>
  <head>

    <script src="jspsych-6.3.1/jspsych.js"></script>
    <script src="js/papaparse.min.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-survey-likert.js"></script>
    <link rel="stylesheet" href="jspsych-6.3.1/css/jspsych.css">
  </head>
  <body></body>
  <script>

    var publicSpreadsheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSSJgGnhBFpWYOlvwvqy_sMqnqg0MIUSYDSjYt08qk66CTKJ6x0ygX_24bmZJnabxlhJYDI_Cig-5Z7/pub?output=csv"

Papa.parse(publicSpreadsheetUrl, {
  download: true,
  header: true,
  complete: function(results) {
    var data = results.data;
    console.log(data);
    startExperiment(data);
  }
})

var timeline = [];

function createTrials(data) {

  var questions = [];
  var scale = ["Completely unknown", "not well known", "Somewhat unknown", "somewhat known", "well known", "very well known"];

  for (i=0; i<data.length; i++) {
    questions.push({
        prompt: data["questions"][i],
        labels: scale,
        required: true, 
    });
  };


  
  var likert_trial = {
      type: 'survey-likert',
      preamble: "Please indicate how well your child knows each animal word.<br><br>To what extent are each of the following animal words known (or unknown) to your child?",
      questions: questions
  };

  timeline = [likert_trial];

}

  
function startExperiment(data) {
  createTrials(data);

  jsPsych.init({
    timeline: timeline,
    on_finish: function() { jsPsych.data.displayData(); }
  });
};


  </script>
</html>
