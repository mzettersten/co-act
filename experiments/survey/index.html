<!DOCTYPE html>
<html>
  <head>

    <script src="jspsych-6.3.1/jspsych.js"></script>
    <script src="js/papaparse.min.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-survey-likert.js"></script>
    <link rel="stylesheet" href="jspsych-6.3.1/css/jspsych.css">
  </head>
  <body></body>
  <script>

    var publicSpreadsheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSSJgGnhBFpWYOlvwvqy_sMqnqg0MIUSYDSjYt08qk66CTKJ6x0ygX_24bmZJnabxlhJYDI_Cig-5Z7/pub?output=csv"

Papa.parse(publicSpreadsheetUrl, {
  download: true,
  header: true,
  complete: function(results) {
    var data = results.data;
    console.log(data);
    startExperiment(data);
  }
})

var timeline = [];

function createTrials(data) {
  var scale = ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"];

  var likert_trial = {
      type: 'survey-likert',
      questions: [
        {prompt: "I like vegetables.", name: 'Vegetables', labels: scale, required: true}, 
        {prompt: "I like fruit.", name: 'Fruit', labels: scale, required: true}
      ],
  };

  var likert_trial_random_order = {
      type: 'survey-likert',
      questions: [
        {prompt: "Question 1", labels: scale}, 
        {prompt: "Question 2", labels: scale},
        {prompt: "Question 3", labels: scale},
        {prompt: "Question 4", labels: scale},
        {prompt: "Question 5", labels: scale}
      ],
      randomize_question_order: true,
      scale_width: 500
  };

  timeline = [likert_trial, likert_trial_random_order];

}

  
function startExperiment(data) {
  createTrials(data);

  jsPsych.init({
    timeline: timeline,
    on_finish: function() { jsPsych.data.displayData(); }
  });
};


  </script>
</html>
